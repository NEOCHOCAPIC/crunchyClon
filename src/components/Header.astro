---
import crunchy from "../assets/img/cruncgy.svg";
import CrunchyMovil from "../assets/img/CrunchyMovil.svg";
---

<header class="bg-negro fixed z-[70] w-full h-16">
  <div
    class="flex max-w-7xl md:mx-auto justify-between items-center p-0 mt-0 mx-4"
  >
    <nav class="flex items-center space-x-8">
      <!-- Menú hamburguesa para moviles -->
      <button
        id="menu-button"
        class="text-white lg:hidden focus:outline-none h-10"
      >
        <svg
          class="w-8 h-8"
          fill="none"
          stroke="currentColor"
          viewBox="0 0 24 24"
          xmlns="http://www.w3.org/2000/svg"
        >
          <path
            stroke-linecap="round"
            stroke-linejoin="round"
            stroke-width="2"
            d="M4 6h16M4 12h16M4 18h16"></path>
        </svg>
      </button><!-- Fin de mi menu hamburguesa -->
      <a href="/">
        <img
          src={CrunchyMovil.src}
          alt="Logo de Crunchyroll"
          class="md:hidden lg:hidden"
        />
        <img
          src={crunchy.src}
          alt="Logo de Crunchyroll"
          class="hidden md:block"
        />
      </a>
      <ul class="hidden lg:flex space-x-5 text-white">
        <li>
          <a
            href="#"
            class="hover:bg-gray-900 px-3 py-5 transition duration-150 ease-in-out"
            >Explorar</a
          >
        </li>
        <li>
          <a
            href="#"
            class="hover:bg-gray-900 px-3 py-5 transition duration-150 ease-in-out"
            >Juegos</a
          >
        </li>
        <li>
          <a
            href="#"
            class="hover:bg-gray-900 px-3 py-5 transition duration-150 ease-in-out"
            >Catalogo</a
          >
        </li>
      </ul>
    </nav>
    <div class="text-white items-center flex">
      <a
        href=""
        class="hover:bg-gray-900 px-3 py-3 transition duration-150 ease-in-out flex"
      >
        <div class="flex">
          <svg
            class="premium-filled-icon--nW2Vi left-icon premium-icon h-8 w-auto transition-colors duration-200 inline-block"
            xmlns="http://www.w3.org/2000/svg"
            viewBox="0 0 16 16"
            data-t="premium-filled-svg"
            aria-labelledby="premium-filled-svg"
            aria-hidden="true"
            role="img"
          >
            <title id="premium-filled-svg">Premium</title>
            <path
              class="fill-custom-yellow transition-colors duration-200"
              d="M2.419 13L0 4.797 4.837 6.94 8 2l3.163 4.94L16 4.798 13.581 13z"
            ></path>
          </svg>
        </div>
        <div class="flex flex-col ml-1">
          <span class="text-xs text-custom-yellow max-md:hidden"
            >PROBAR GRATIS</span
          >
          <span class="text-xs max-md:hidden">PREMIUM</span>
        </div>
      </a>
      <a
        href="#"
        class="hover:bg-gray-900 px-3 py-5 transition duration-150 ease-in-out"
      >
        <svg
          class="w-6 h-6 inline-block"
          fill="none"
          stroke="currentColor"
          viewBox="0 0 24 24"
          xmlns="http://www.w3.org/2000/svg"
        >
          <path
            stroke-linecap="round"
            stroke-linejoin="round"
            stroke-width="2"
            d="M21 21l-6-6m2-5a7 7 0 11-14 0 7 7 0 0114 0z"></path>
        </svg>
      </a>
      <a
        href="#"
        class="hover:bg-gray-900 px-3 py-5 transition duration-150 ease-in-out max-md:hidden"
      >
        <svg
          class="w-6 h-6 inline-block"
          fill="none"
          stroke="currentColor"
          viewBox="0 0 24 24"
          xmlns="http://www.w3.org/2000/svg"
        >
          <path
            stroke-linecap="round"
            stroke-linejoin="round"
            stroke-width="2"
            d="M5 5a2 2 0 012-2h10a2 2 0 012 2v16l-7-3.5L5 21V5z"></path>
        </svg>
      </a>
      <a
        href="#"
        class="hover:bg-gray-900 px-3 py-5 transition duration-150 ease-in-out"
      >
        <svg
          class="w-6 h-6 inline-block"
          fill="none"
          stroke="currentColor"
          viewBox="0 0 24 24"
          xmlns="http://www.w3.org/2000/svg"
        >
          <path
            stroke-linecap="round"
            stroke-linejoin="round"
            stroke-width="2"
            d="M16 7a4 4 0 11-8 0 4 4 0 018 0zM12 14a7 7 0 00-7 7h14a7 7 0 00-7-7z"
          ></path>
        </svg>
      </a>
    </div>
  </div>
</header>
<!-- Menú lateral movil -->
<div
  id="sidebar"
  class="fixed left-0 top-16 w-full h-[calc(100%-4rem)] bg-[#141519] transform -translate-x-full transition-transform duration-300 lg:hidden z-[60] overflow-y-auto"
>
  <nav class="mt-4 flex flex-col">
    <div>
      <small class="text-gris px-4 py-3 text-xl">Explorar</small>
    </div>
    <ul class="space-y-2 text-white pb-5">
      <li>
        <a
          href="#"
          class="block px-4 py-2 hover:bg-gray-800 transition duration-150 ease-in-out"
          >Popular</a
        >
      </li>
      <li>
        <a
          href="#"
          class="block px-4 py-2 hover:bg-gray-800 transition duration-150 ease-in-out"
          >Novedades</a
        >
      </li>
      <li>
        <a
          href="#"
          class="block px-4 py-2 hover:bg-gray-800 transition duration-150 ease-in-out"
          >Alfabeticos</a
        >
      </li>
      <li>
        <a
          href="#"
          class="block px-4 py-2 hover:bg-gray-800 transition duration-150 ease-in-out"
          >Temporada de simulcast</a
        >
      </li>
      <li>
        <a
          href="#"
          class="block px-4 py-2 hover:bg-gray-800 transition duration-150 ease-in-out"
          >Calendario de lanzamientos</a
        >
      </li>
      <li>
        <a
          href="#"
          class="block px-4 py-2 hover:bg-gray-800 transition duration-150 ease-in-out"
          >Videos Musicales y concierto</a
        >
      </li>
      <li>
        <a
          href="#"
          class="block px-4 py-2 hover:bg-gray-800 transition duration-150 ease-in-out"
          >Generos</a
        >
      </li>
    </ul>
    <div class="text-white border-t border-gris pt-5">
      <ul>
        <li>
          <a
            href="#"
            class="block px-4 py-2 hover:bg-gray-800 transition duration-150 ease-in-out"
            >Juegos</a
          >
        </li>
        <li>
          <a
            href="#"
            class="block px-4 py-2 hover:bg-gray-800 transition duration-150 ease-in-out"
            >Noticias</a
          >
        </li>
      </ul>
    </div>
  </nav>
</div>
<script>
  // Selecciona los elementos del DOM
  const menuButton = document.getElementById("menu-button") as HTMLElement;
  const sidebar = document.getElementById("sidebar") as HTMLElement;

  // Función para abrir y cerrar el menú lateral
  function toggleSidebar(): void {
    sidebar.classList.toggle("-translate-x-full");

    // Prevenir el scroll del fondo
    if (sidebar.classList.contains("-translate-x-full")) {
      document.body.style.overflow = ""; // Permitir scroll
    } else {
      document.body.style.overflow = "hidden"; // Prevenir scroll
    }
  }

  // Abre y cierra el menú lateral al hacer clic en el botón de menú
  menuButton.addEventListener("click", (event: MouseEvent) => {
    event.stopPropagation(); // Previene que el clic se propague al documento
    toggleSidebar();
  });

  // Cierra el menú lateral si se hace clic en un enlace dentro de él
  sidebar.querySelectorAll("a").forEach((link) => {
    link.addEventListener("click", () => {
      sidebar.classList.add("-translate-x-full");
      document.body.style.overflow = ""; // Permitir scroll
    });
  });

  // Previene que los clics dentro del sidebar cierren el menú
  sidebar.addEventListener("click", (event: MouseEvent) => {
    event.stopPropagation();
  });
</script>
